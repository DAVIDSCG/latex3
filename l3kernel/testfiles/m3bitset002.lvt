% !Mode:: "TeX:UTF-8:Main"
\input{regression-test}
\RequirePackage[enable-debug,check-declarations]{expl3}
\documentclass{article}



\begin{document}
\ExplSyntaxOn
\ExplSyntaxOn
\START
\OMIT
\bitset_new:N \l_my_test_bitset
\prop_new:N   \l_my_test_bitset_prop
\prop_set_from_keyval:Nn \l_my_test_bitset_prop
  {
    Invisible      = 1,
    Hidden         = 2,
    Print          = 3,
    NoZoom         = 4,
    NoRotate       = 5,
    NoView         = 6,
    ReadOnly       = 7,
    Locked         = 8,
    ToggleNoView   = 9,
    LockedContents = 10
  }
\bitset_new:N \g_my_test_bitset
\prop_new:N   \g_my_test_bitset_prop
\prop_gset_from_keyval:Nn \g_my_test_bitset_prop
  {
    gInvisible      = 1,
    gHidden         = 2,
    gPrint          = 3,
    gNoZoom         = 4,
    gNoRotate       = 5,
    gNoView         = 6,
    gReadOnly       = 7,
    gLocked         = 8,
    gToggleNoView   = 9,
    gLockedContents = 10
  }  
\TIMO

\TESTEXP { unset~key}
 {
   \bitset_key:Nn \l_my_test_bitset {Invisible}
   \NEWLINE 
   \bitset_key:Nn \g_my_test_bitset {gInvisible}
 }

\OMIT
\bitset_set_key:Nn \l_my_test_bitset{Invisible}
\bitset_gset_key:Nn \g_my_test_bitset{gInvisible}
\TIMO

\TESTEXP { set~Invisible~(index~1) }
 {
   \bitset_to_bin:N \l_my_test_bitset
   \NEWLINE
   \bitset_key:Nn \l_my_test_bitset {Invisible}
   \NEWLINE
   \bitset_to_bin:N \g_my_test_bitset
   \NEWLINE
   \bitset_key:Nn \g_my_test_bitset {gInvisible}
   \NEWLINE
 }

\TEST { set~unknown~key}
 {
   \bitset_set_key:Nn \l_my_test_bitset{unknown}
   \NEWLINE
   \bitset_gset_key:Nn \g_my_test_bitset{unknown}
   \NEWLINE
   \bitset_show:N \l_my_test_bitset
   \NEWLINE
   \bitset_show:N \g_my_test_bitset
 }  

\OMIT
\bitset_set_key:Nn   \l_my_test_bitset {Print}
\bitset_set_key:Nn   \l_my_test_bitset {NoRotate}
\bitset_set_key:Nn   \l_my_test_bitset {ReadOnly}
\bitset_set_key:Nn   \l_my_test_bitset {ToggleNoView}
\bitset_gset_key:Nn   \g_my_test_bitset {gPrint}
\bitset_gset_key:Nn   \g_my_test_bitset {gNoRotate}
\bitset_gset_key:Nn   \g_my_test_bitset {gReadOnly}
\bitset_gset_key:Nn   \g_my_test_bitset {gToggleNoView}
\TIMO

\TESTEXP {set~3,~4,~5,~6}
 {
  \bitset_to_bin:N     \l_my_test_bitset
  \NEWLINE  
  \bitset_to_arabic:N  \l_my_test_bitset
  \NEWLINE
  \bitset_to_bin:N     \g_my_test_bitset
  \NEWLINE
  \bitset_to_arabic:N  \g_my_test_bitset
 }

\OMIT
\bitset_set_false_key:Nn   \l_my_test_bitset {Print}
\bitset_set_false_key:Nn   \l_my_test_bitset {NoRotate}
\bitset_set_false_key:Nn   \l_my_test_bitset {ReadOnly}
\bitset_set_false_key:Nn   \l_my_test_bitset {ToggleNoView}
\bitset_gset_false_key:Nn   \g_my_test_bitset {gPrint}
\bitset_gset_false_key:Nn   \g_my_test_bitset {gNoRotate}
\bitset_gset_false_key:Nn   \g_my_test_bitset {gReadOnly}
\bitset_gset_false_key:Nn   \g_my_test_bitset {gToggleNoView}
\TIMO


\TESTEXP {unset~3,~4,~5,~6}
 {
  \bitset_to_bin:N     \l_my_test_bitset
  \NEWLINE
  \bitset_to_arabic:N  \l_my_test_bitset
  \NEWLINE
  \bitset_to_bin:N     \g_my_test_bitset
  \NEWLINE
  \bitset_to_arabic:N  \g_my_test_bitset
 }

\ExplSyntaxOff
\END